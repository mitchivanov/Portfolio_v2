import React, { useRef, useEffect, useState } from 'react';

function SpiralBackground() {
  const pathRef = useRef(null);
  const [pathLength, setPathLength] = useState(0);

  const [dash, setDash] = useState({ dasharray: 0, dashoffset: 0 });

  useEffect(() => {
    if (pathRef.current) {
      const length = pathRef.current.getTotalLength();
      setPathLength(length);
    }
  }, []);

  useEffect(() => {
    let start = 0;
    let end = 0;
    const speed = 1;

    const animate = () => {
      end += speed;        
      start += speed * 0.8; 
      requestAnimationFrame(() => {
        setDash({
          dasharray: start,
          dashoffset: start
        });
        animate();
      });
    };

    animate();
  }, [pathLength]);

  return (
    <div
      style={{
       
        position: 'fixed',
        top: 0,
        left: 0,
        width: '100%',
        height: '100%',
        zIndex: -1,            
        pointerEvents: 'none',   
     
      }}
    >
      <svg
        width="100%"
        height="100%"
        viewBox="0 0 1920 1080"
        style={{
          background: 'none', 
        }}
        preserveAspectRatio="xMidYMid slice"
      >
        {}
        <defs>
          <linearGradient id="ribbonGradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stopColor="#8E44AD" />
            <stop offset="100%" stopColor="#FF4500" />
          </linearGradient>
        </defs>

        <path
          ref={pathRef}

          d="M17.72,292.28c37.37-7.42,64.1,26.03,77.59,56.27,12.57,28.17,22.1,56.84,38.12,83.42,28.77,47.73,69.11,88.24,115.99,118.27,47.27,30.28,101.47,49.95,157.41,55.53,46.47,4.63,112.94.87,134.68-49.08,10.74-24.69,5.52-54.34-9.53-76.09-15.8-22.83-41.45-37.14-68-43.68-60.12-14.79-121.89,8.13-162.68,53.32-21.29,23.59-38.44,51.25-53.54,79.1-15.45,28.5-28.57,59.71-30.1,92.49-2.91,62.58,43.96,107.84,96.6,133.19,59.01,28.41,125.4,35.35,190.13,35.33,33.91-.01,67.87-1.72,101.71-3.92,15.69-1.02,31.69-2.6,46.35-8.66,13.2-5.46,23.87-14.68,33.62-24.92,23.26-24.43,45.65-48.2,73.17-68.06,27.44-19.8,57.8-36.83,89.74-48.18,17.41-6.18,35.87-10.49,54.45-9.5s35.37,8.19,50.49,18.8c26.61,18.66,49.03,42.19,76.59,59.76,53.46,34.09,119.2,57.63,183.15,57.25,29.15-.17,56.2-7.91,81.39-22.35,23.12-13.25,43.87-30.12,65.17-46.01,20.63-15.39,42.32-30.83,67.05-38.84,27.27-8.83,55.17-5.62,80.42,7.69,25.61,13.5,46.91,33.6,71.01,49.41,23.49,15.41,49.43,24.87,77.8,24.33,57.13-1.08,106.32-39.62,120.65-94.97,6.4-24.74,6.86-54.49-5.84-77.39-11.35-20.46-33.79-31.1-53.4-14.18-20.36,17.57-30.08,46.74-32.84,72.67-3.16,29.65,1.8,59.9,10.37,88.27,8.24,27.28,19.37,56.62,43.32,73.92s52.96,20.22,80.23,15.91c32.8-5.19,62.63-21.06,91.6-36.46,1.71-.91.19-3.5-1.51-2.59-30.22,16.07-61.71,33.02-96.27,36.88-29.72,3.32-62.17-3.38-83.31-25.84-20.82-22.12-30.45-55.25-36.84-84.29-6.31-28.69-8.3-59.33-.44-87.93,6.78-24.68,33.27-75.27,64.64-49.57,23.06,18.89,24.46,55.97,19.01,82.9-12.13,59.91-65.46,101.9-126.59,99.62-59.34-2.21-94.02-50.67-143.63-75.09-19.82-9.76-41.59-13.78-63.48-10.07s-42.29,14.61-60.76,26.89c-40.33,26.81-76.43,64.06-123.96,78.08-33.55,9.9-69.69,6.32-103.4-.83-30.33-6.43-59.82-16.73-87.58-30.53-27.78-13.81-53.58-31.11-77.11-51.31-21.18-18.19-42.47-38.8-70.64-45.08-28.86-6.43-58.7,2.11-85.23,13.32s-54.05,26.79-78.31,44.59c-23.52,17.25-44.45,37.16-63.97,58.77-10.45,11.57-21.34,23.23-35.52,30.22-15.83,7.81-33.86,9.39-51.22,10.48-62.86,3.93-126.69,7.23-189.26-1.91-58.72-8.58-122.24-29.58-163.08-74.86-21.24-23.55-32.97-53.02-31.49-84.93,1.58-33.95,15.84-66.17,32.14-95.45,30.36-54.51,69-108.63,132.43-125.45,56.79-15.06,137.49,1.74,155.82,65.85,8.55,29.89-1.56,60.8-27.56,78.24-21.83,14.64-49.53,19.09-75.33,19.32-54.34.5-109.1-14.54-157.2-39.36-47.88-24.72-90.42-59.89-123.23-102.67-16.52-21.55-30.6-45.05-41.48-69.95-11.49-26.29-18.93-55.66-37.92-77.92-15.11-17.72-37.83-29.73-61.42-25.04-1.89.38-1.09,3.27.8,2.89h0Z"

          fill="none"
          stroke="url(#ribbonGradient)"
          strokeWidth="40"          
          strokeDasharray={dash.dasharray}  
          strokeDashoffset={dash.dashoffset} 
          strokeLinecap="round"
        />
      </svg>
    </div>
  );
}

export default SpiralBackground;
